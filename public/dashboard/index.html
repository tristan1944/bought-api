
  <!DOCTYPE html>
  <html lang="en">
    <head>
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <title>Refine Figma AI Prompt</title>
      <script type="module" crossorigin src="/dashboard/assets/index-Bk5UViOs.js"></script>
      <link rel="stylesheet" crossorigin href="/dashboard/assets/index-C21VsLka.css">
      <style>
        #trialExpiredOverlay {
          position: fixed;
          inset: 0;
          display: none;
          align-items: center;
          justify-content: center;
          background: rgba(0, 0, 0, 0.65);
          z-index: 9999;
          padding: 24px;
        }
        #trialExpiredOverlay .card {
          width: 100%;
          max-width: 420px;
          background: white;
          border-radius: 16px;
          padding: 28px;
          box-shadow: 0 20px 60px rgba(0, 0, 0, 0.35);
          text-align: center;
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        }
        #trialExpiredOverlay .title {
          font-size: 28px;
          font-weight: 800;
          margin-bottom: 10px;
          color: #111827;
        }
        #trialExpiredOverlay .desc {
          font-size: 14px;
          color: #4b5563;
          margin-bottom: 18px;
          line-height: 1.45;
        }
        #trialExpiredOverlay .btn {
          width: 100%;
          border: none;
          border-radius: 12px;
          padding: 12px 16px;
          cursor: pointer;
          font-weight: 700;
          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
          color: white;
        }
        #trialExpiredOverlay .btn:hover {
          opacity: 0.95;
        }
      </style>
    </head>

    <body>
      <div id="trialExpiredOverlay">
        <div class="card">
          <div class="title">Expired</div>
          <div class="desc">
            Your 7-day free trial has ended. Upgrade to continue.
          </div>
          <button class="btn" id="trialExpiredUpgradeBtn">Upgrade</button>
        </div>
      </div>
      <div id="root"></div>

      <script>
        (async function () {
          try {
            const token = localStorage.getItem('token') || localStorage.getItem('authToken');
            if (!token) return;

            const res = await fetch('/auth/me', {
              headers: { 'Authorization': `Bearer ${token}` },
            });

            if (!res.ok) return;

            const data = await res.json();
            const user = data && data.user ? data.user : null;
            const trial = user && user.trial ? user.trial : null;
            const pricePlan = user ? user.pricePlan : null;

            // If trial expired and user isn't on a paid plan, lock the app
            if (trial && trial.expired && !pricePlan) {
              const overlay = document.getElementById('trialExpiredOverlay');
              const root = document.getElementById('root');
              const btn = document.getElementById('trialExpiredUpgradeBtn');
              if (root) root.style.display = 'none';
              if (overlay) overlay.style.display = 'flex';
              if (btn) btn.addEventListener('click', function () {
                window.location.href = '/pricing.html';
              });
            }
          } catch (e) {
            // Fail open if anything goes wrong (don't block the app)
            console.warn('[Trial] Expired overlay check failed:', e);
          }
        })();
      </script>
    </body>
  </html>
  